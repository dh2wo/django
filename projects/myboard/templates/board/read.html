{% extends 'common/base.html' %}
  {% block title %}[글 보기]{% endblock title %}
  {% block body %}
    <br>
    <h1>#{{ board.id }}</h1>
    <table border="1">
      <tr>
        <th>제목</th>
        <td>{{ board.title }}</td>
      </tr>
      <tr>
        <th>글쓴이</th>
        <td>{{ board.author.username }}</td>
      </tr>
      <tr>
        <th>내용</th>
        <td>{{ board.content }}</td>
      </tr>
      <tr>
        <th>조회수</th>
        <td>{{ board.view_count }}</td>
      </tr>
      <tr>
        <th>날짜</th>
        <td>{{ board.input_date }}</td>
      </tr>
    </table>
    <br />
    <!-- 수정, 삭제 -->
    <!-- username끼리 비교하려면 아래처럼 -->
    {% comment %} {% if board.author == user %} board.author는 user하고 비교한다 {% endcomment %}
    {% if board.author.username == user.username %}
      <a href="{% url 'board:update' board.id %}">수정</a>&nbsp;
      <a href="{% url 'board:delete' board.id %}" onclick="return confirm('정말 삭제하시겠습니까?')">삭제</a>&nbsp;
    {% endif %}
    <div id = 'relpyArea'>
      <!-- 댓글 목록 표시할 곳-->
      <div id = 'replyList'>
        <!-- board 객체 뿐만 아니라 board와 FK로 엮인 객체는 borad.모델이름_set으로 가져올 수 있다 -->
        {% if board.reply_set %}
          {% for reply in board.reply_set.all %}
            {{ reply }}<br>
          {% endfor %}
        {% else %}
          <p>등록된 댓글이 없습니다.</p>
        {% endif %}
      </div>
      <!-- 댓글 입력 폼-->
      <div id = 'replyForm'>
        <form action = "{% url 'board:write_reply' board.id %}" method = 'POST'>
        {% csrf_token %}
          <textarea name = 'replyText'></textarea>
          <input type = 'submit' value = '댓글쓰기'>
        </form>
      </div>
    </div>
    <br />
    <a href="{% url 'board:index' %}">목록으로</a>
  {% endblock body %}
